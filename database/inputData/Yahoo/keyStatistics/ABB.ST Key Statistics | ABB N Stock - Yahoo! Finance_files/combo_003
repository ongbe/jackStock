
if(typeof YAHOO=="undefined"){YAHOO={};}
if(!YAHOO.ULT){YAHOO.ULT={};}
if(!YAHOO.ULT.BEACON){YAHOO.ULT.BEACON="http://geo.yahoo.com/t";}
if(!YAHOO.ULT.IMG){YAHOO.ULT.IMG=new Image();}
YAHOO.ULT.SRC_SPACEID_KEY='_S';YAHOO.ULT.DEST_SPACEID_KEY='_s';YAHOO.ULT.YLC_LIBSRC=2;YAHOO.ULT.CTRL_C='\x03';YAHOO.ULT.CTRL_D='\x04';YAHOO.ULT.BASE64_STR="ABCDEFGHIJKLMNOP"+"QRSTUVWXYZabcdef"+"ghijklmnopqrstuv"+"wxyz0123456789._-";(function(){YAHOO.ULT.track_click=function(u,p){if(!u||!p){return u;}
p._r=YAHOO.ULT.YLC_LIBSRC;var ks=[];var i=0;for(var k in p){var v=p[k];if(typeof(v)=='undefined'){v=p[k]='';}
if(k.length<1){return u;}
if(k.length>8){return u;}
if(k.indexOf(' ')!=-1){return u;}
if(YAHOO.ULT.has_ctrl_char(k)||YAHOO.ULT.has_ctrl_char(v)){return u;}
ks[i++]=k;}
ks=ks.sort();var f=[];for(i=0;i<ks.length;i++){f[i]=ks[i]+YAHOO.ULT.CTRL_C+p[ks[i]];}
f=f.join(YAHOO.ULT.CTRL_D);if(f.length<1||f.length>1024){return u;}
f=';_ylc='+YAHOO.ULT.encode64(f);i=u.indexOf('/*');if(i==-1){i=u.indexOf('/?');}
if(i==-1){i=u.indexOf('?');}
if(i==-1){return u+f;}else{return u.substr(0,i)+f+u.substr(i);}};YAHOO.ULT.beacon_click=function(p,i){if(!i){i=YAHOO.ULT.IMG;}
if(p){var url=YAHOO.ULT.track_click(YAHOO.ULT.BEACON,p);url+='?t='+Math.random();i.src=url;}
return true;};YAHOO.ULT.has_ctrl_char=function(s){for(var i=0;i<s.length;i++){if(s.charCodeAt(i)<0x20){return true;}}
return false;};YAHOO.ULT.encode64=function(input){var output="";var chr1,chr2,chr3="";var enc1,enc2,enc3,enc4="";var i=0;do{chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64;}else if(isNaN(chr3)){enc4=64;}
output=output+
YAHOO.ULT.BASE64_STR.charAt(enc1)+
YAHOO.ULT.BASE64_STR.charAt(enc2)+
YAHOO.ULT.BASE64_STR.charAt(enc3)+
YAHOO.ULT.BASE64_STR.charAt(enc4);chr1=chr2=chr3="";enc1=enc2=enc3=enc4="";}while(i<input.length);return output;};})();
function loadRequiredLibraries(libs,config,callback){this.log=function(msg,more){if(config.debug&&window.console&&window.console.log){window.console.log(msg,more);}}
var libsLoadedEvent=new YAHOO.util.CustomEvent("libsLoadedEvent",this);var libsLoadedDone=function(){this.log('Yay, we have all our YUI dependencies!');if(typeof(callback=='function')){callback();}
return true;}
libsLoadedEvent.subscribe(libsLoadedDone,this);var lazyLoadLibs=[];for(i=0,l=libs.length;i<l;i++){if(!YAHOO.env.getVersion(libs[i])){this.log('I need to load',libs[i]);lazyLoadLibs.push(libs[i]);}}
if(lazyLoadLibs.length>0){var that=this;var loaderConf={require:lazyLoadLibs,loadOptional:false,onSuccess:function(o){that.log('loaded lib',o);libsLoadedEvent.fire();},onFailure:function(o){that.log('failed to load lib',o);return false;},timeout:1000,combine:true}
var loader=new YAHOO.util.YUILoader(loaderConf);loader.insert();}else{libsLoadedEvent.fire();}
return true;};
if(typeof(YAHOO.Finance)=="undefined"||typeof(YAHOO.Finance.SymbolSuggest)=="undefined"){YAHOO.namespace("YAHOO.Finance.SymbolSuggest");}
YAHOO.Finance.SymbolSuggest=function(){var defaultContainerId="quoteContainer";var defaultInputId="txtQuotes";var defaultDSServer=(window.location.protocol==='https:'?'https://s.yimg.com/autoc.finance.yahoo.com':'http://d.yimg.com/autoc.finance.yahoo.com');var defaultInputFormId='searchQuotes';var defaultDSRegion='US';var defaultDSLang='en-US';var defaultDSFooter='';var defaultDSDomain='finance.yahoo.com';var defaultQuoteLogicId="get_quote_logic_opt";var turnOffQuoteLogic="0";var defaultSubmitOnSelect="1";var acContainerId;var acContainerEl;var acInputId;var acInputEl;var acInputFormId;var acInputFormEl;var acQuoteLogicEl;var acSubmitOnSelect;var dsServer;var symbolQuery;var dsRegion;var dsLang;var dsFooter;var oDataSource;var oAutoComplete;var acInputHasInitialFocus=false;var acInputHasFocus=function(value){acInputHasInitialFocus=value;};initDataSource=function(config){if(null!=config.dsServer){if(null==dsRegion){dsRegion='US';}
if(null==dsLang){dsLang='en-US';}
if(null==dsFooter){dsFooter='';}
var oDS=new YAHOO.util.ScriptNodeDataSource(config.dsServer);}else{return false;}
var DataSourceOverrides=function(){oDS.generateRequestCallback=function(id){return"&"+this.scriptCallbackParam+"=YAHOO.util.ScriptNodeDataSource.callbacks";}
oDS.callbacks=null;oDS.makeConnection=function(oRequest,oCallback,oCaller){var tId=oDS._nTransactionId++;this.fireEvent("requestEvent",{tId:tId,request:oRequest,callback:oCallback,caller:oCaller});util=YAHOO.util;if(util.ScriptNodeDataSource._nPending===0){util.ScriptNodeDataSource.callbacks=null;util.ScriptNodeDataSource._nId=0;}
var id=util.ScriptNodeDataSource._nId;util.ScriptNodeDataSource._nId++;var oSelf=this;util.ScriptNodeDataSource.callbacks=function(oRawResponse){if((oSelf.asyncMode!=="ignoreStaleResponses")||(id===util.ScriptNodeDataSource.callbacks.length-1)){if(oSelf.responseType===oDS.TYPE_UNKNOWN){if(YAHOO.lang.isArray(oRawResponse)){oSelf.responseType=oDS.TYPE_JSARRAY;}
else if(oRawResponse.nodeType&&oRawResponse.nodeType==9){oSelf.responseType=oDS.TYPE_XML;}
else if(oRawResponse.nodeName&&(oRawResponse.nodeName.toLowerCase()=="table")){oSelf.responseType=oDS.TYPE_HTMLTABLE;}
else if(YAHOO.lang.isObject(oRawResponse)){oSelf.responseType=oDS.TYPE_JSON;}
else if(YAHOO.lang.isString(oRawResponse)){oSelf.responseType=oDS.TYPE_TEXT;}}
oSelf.handleResponse(oRequest,oRawResponse,oCallback,oCaller,tId);}};util.ScriptNodeDataSource._nPending++;var sUri=this.liveData+oRequest+this.generateRequestCallback(id);sUri=this.doBeforeGetScriptNode(sUri);this.getUtility.script(sUri,{autopurge:true,onsuccess:util.ScriptNodeDataSource._bumpPendingDown,onfail:util.ScriptNodeDataSource._bumpPendingDown});return tId;}}();oDS.responseSchema={resultsList:"ResultSet.Result",fields:["symbol","name","exch","type","exchDisp","typeDisp"]};return oDS;}
initAutoComplete=function(oDS,config){initContainer=function(){var acContainerEl=YAHOO.util.Dom.get(config.defaultContainerId);if(!acContainerEl){acContainerEl=document.createElement("div");acContainerEl.setAttribute("id",config.defaultContainerId);document.body.appendChild(acContainerEl);}
YAHOO.util.Dom.addClass(acContainerEl,"yfi-quote-container");return acContainerEl;};var containerEl=initContainer(defaultContainerId);var oAC=new YAHOO.widget.AutoComplete(config.defaultInputId,config.defaultContainerId,oDS);if(acInputHasFocus){oAC._bFocused=true;}
oAC.animVert=false;oAC.allowBrowserAutocomplete=false;oAC.queryDelay=0.1;oAC.delimChar=[",","+"];oAC.highlightClassName="yui-ac-highlight";oAC.typeAhead=true;oAC.autoHighlight=false;oAC.useIFrame=true;oAC._iFrameSrc="";oAC.generateRequest=function(symbolQuery){return"?query="+symbolQuery+"&region="+dsRegion+"&lang="+dsLang;};oAC.formatResult=function(oResItem,sQuery,sResultMatch){var symbol=oResItem[0];var name=" "+oResItem[1];var exch=oResItem[2];var type=oResItem[3];var exchDisp=oResItem[4];var typeDisp=oResItem[5];var queryMatch=symbol.toLowerCase().indexOf(sQuery.toLowerCase());if(queryMatch==0){symbol="<em>"+symbol.substr(0,sQuery.length)+"</em>"+symbol.substr(sQuery.length);}else{queryMatch=name.toLowerCase().indexOf(" "+sQuery.toLowerCase());if(queryMatch!=-1){name=name.substr(0,queryMatch)+" <em>"+name.substr(queryMatch+1,sQuery.length)+"</em>"+name.substr(queryMatch+sQuery.length+1);}}
var symbol_wrp=['<span class="symbol">',symbol,'</span> '];var name_wrp=['<span class="name">',name.substr(1),'</span> '];var exch_type_wrp=["<span class=\"exch_type_wrapper\"> "];if(typeDisp){exch_type_wrp.push(typeDisp);exch_type_wrp.push(" - ");}
if(exchDisp){exch_type_wrp.push(exchDisp);}else{exch_type_wrp.push(exch);}
exch_type_wrp.push("</span>");var res=[symbol_wrp.join(''),name_wrp.join(''),exch_type_wrp.join('')];return res.join('');};oAC.doBeforeExpandContainer=function(oTextbox,oContainer,sQuery,sResults){var pos=YAHOO.util.Dom.getXY(oTextbox);if((pos[0]+563)>YAHOO.util.Dom.getViewportWidth())
{var txtregion=YAHOO.util.Dom.getRegion(oTextbox);var autocwidth=563;if(YAHOO.env.ua.ie>0)
var autocwidth=597;pos[0]=txtregion['right']-autocwidth;}
pos[1]+=YAHOO.util.Dom.get(oTextbox).offsetHeight;YAHOO.util.Dom.setXY(oContainer,pos);symbolQuery=decodeURIComponent(sQuery).toLowerCase();var stripHTML=/<\S[^><]*(\/|>)/g;symbolQuery=symbolQuery.replace(stripHTML,"");HTML_CHARS={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#x27;','/':'&#x2F;','`':'&#x60;'}
symbolQuery=symbolQuery.replace(/[&<>"'\/`]/g,function(match){return HTML_CHARS[match];});var link=encodeURIComponent(symbolQuery);var footerStr;footerStr=dsFooter.replace(/\[\[link\]\]/g,link);footerStr=footerStr.replace(/\[\[tickdquote\]\]/g,''+symbolQuery+'');oAC.setFooter(footerStr);return true;};return oAC;}
function replaceValues(str,key,val){var arr=str.split(';');var done=false;for(var i in arr){var entry=arr[i].split('=');if(entry[0]==key){entry[1]=val;arr[i]=entry.join('=');done=true;}}
str=arr.join(';');if(!done){str+=';'+key+'='+val;}
return str;}
function resetCompare(){if(typeof YAHOO.Finance.Cookie.getObj=='function'&&typeof YAHOO.Finance.Cookie.set=='function'){if(YAHOO.Finance.Cookie.getObj('PRF')){var prfObj=YAHOO.Finance.Cookie.getObj('PRF');var curr_state=prfObj.cd;if(typeof(curr_state)!=='undefined'){curr_state=replaceValues(curr_state,"compare","");}
prfObj.cd=curr_state;if(YAHOO.Finance.Cookie.jar.PRF){YAHOO.Finance.Cookie.jar.PRF=null;}
YAHOO.Finance.Cookie.set('PRF',prfObj,3650);}}}
var handleEvents=function(){var acBeacon={query:"",KEY_PRESS_EVENT:"keybrd",CLICK_EVENT:"click",rapidAvailable:function(){return typeof rapidTracker!=="undefined";},track:function(options){if(acBeacon.rapidAvailable()){rapidTracker.beaconEvent(options.event_name,options.params,options.outcome_name||"");}},trackSelected:function(params){params=params||{};params.sec="auto-complete";params.bkt=window.yfinBucket;acBeacon.track({event_name:acBeacon.CLICK_EVENT,params:params})}};var onFormSubmit=function(e){if(acInputBoxEl.value==acInputBoxEl.defaultValue){acInputBoxEl.value="";}
resetCompare();doULT({sec:"getquotesbtn",symbol:acInputBoxEl.value,slk:"single_quote",mid:acModId});lastItemSelectedIndex=-1;};var onInputBoxFocus=function(e){if(acInputBoxEl.value==acInputBoxEl.defaultValue){acInputBoxEl.value="";}};var onInputBoxBlur=function(e){if(acInputBoxEl.value==""){acInputBoxEl.value=acInputBoxEl.defaultValue;}};var onInputBoxKeyup=function(e){var kc=e.keyCode;if(kc==13&&acInputFormEl){acInputFormEl.submit();doULT({sec:"getquotesbtn",symbol:acInputBoxEl.value,slk:"single_quote",mid:acModId});lastItemSelectedIndex=-1;}
if(kc!==13&&(kc<37||kc>40)){acBeacon.query=acInputBoxEl.value;}};var onFooterClick=function(e){var footerLink=this.getElementsByTagName('a')[0];if(footerLink){footerLinkQuote=footerLink.className;if(symbolQuery!=footerLinkQuote){YAHOO.util.Event.preventDefault(e);return;}
lastItemSelectedIndex=500;domainPref=window.location.protocol+"//";dsDomainName=document.domain;domainName='';if(dsDomainName!=''){domainName=dsDomainName;}else{domainName=defaultDSDomain;}
domainExt="/lookup";domainTitle=domainPref.concat(domainName);dsDomain=domainTitle.concat(domainExt);lastItemSelected=dsDomain;doULT({sec:"getquotesbtn",symbol:acInputBoxEl.value,slk:"see_all_results",mid:acModId});}};if(oAutoComplete.itemSelectEvent){oAutoComplete.itemSelectEvent.subscribe(function(s,item,data){lastItemSelectedIndex=item[1]._nItemIndex;lastItemSelected=item[2][0];acBeacon.trackSelected({pos:lastItemSelectedIndex+1,symbol:lastItemSelected,symbolLen:(lastItemSelected||'').length,assetCls:item[2][5],q:acBeacon.query,qlen:(acBeacon.query||'').length,});acInputBoxEl.value=acInputBoxEl.value.replace(/, $/,'');if(acQuoteLogicEl)acQuoteLogicEl.value=turnOffQuoteLogic;if(acInputFormEl){if(acSubmitOnSelect==1){acInputFormEl.submit();}}
doULT({sec:"symbolsuggest",symbol:lastItemSelected,slk:"single_quote",mid:oAutoComplete.acModId});},oAutoComplete,true);}
YAHOO.util.Event.addListener(oAutoComplete._elFooter,"click",onFooterClick);YAHOO.util.Event.addListener(acInputBoxEl,"keyup",onInputBoxKeyup);YAHOO.util.Event.addListener(acInputFormEl,"submit",onFormSubmit);YAHOO.util.Event.addListener(acInputBoxEl,"focus",onInputBoxFocus);YAHOO.util.Event.addListener(acInputBoxEl,"blur",onInputBoxBlur);};var doULT=function(p){if(typeof(lastItemSelectedIndex)=="undefined"){lastItemSelectedIndex=-1;}
var pos=lastItemSelectedIndex;var sec=p.sec;var slk=p.slk;var keyw=p.symbol;var mid=p.mid;var ssk=YAHOO.util.Dom.get("spaceid");var ultObj={"pos":pos,"keyw":keyw,"sec":sec,"slk":slk,"mid":mid};if(ssk){ultObj[YAHOO.ULT.SRC_SPACEID_KEY]=ssk.innerHTML;}
setTimeout(function(){YAHOO.ULT.beacon_click(ultObj);},100);}
var focusInputBox=function(inputId){inputId.focus();}
var init=function(conf){acContainerId=(conf.acContainerId)?conf.acContainerId:defaultContainerId;acInputId=(conf.acInputId)?conf.acInputId:defaultInputId;dsServer=(conf.dsServer)?conf.dsServer:defaultDSServer;dsRegion=(conf.dsRegion)?conf.dsRegion:defaultDSRegion;dsLang=(conf.dsLang)?conf.dsLang:defaultDSLang;dsFooter=(conf.dsFooter)?conf.dsFooter:defaultDSFooter;acInputFormId=(conf.acInputFormId)?conf.acInputFormId:defaultInputFormId;acSubmitOnSelect=(conf.acSubmitOnSelect)?conf.acSubmitOnSelect:defaultSubmitOnSelect;acInputFocus=(conf.acInputFocus)?conf.acInputFocus:0;acModId=(conf.acModId)?conf.acModId:"mediaquotessearch";if(window.yfinBucket==='FIN_TACHYON_AUTOCOMPLETE'){dsServer="https://s.yimg.com/xb/v6/finance/autocomplete";}
var acQuoteLogicId=(conf.acQuoteLogicId)?conf.acQuoteLogicId:defaultQuoteLogicId;acInputFormEl=YAHOO.util.Dom.get(acInputFormId);acInputBoxEl=YAHOO.util.Dom.get(acInputId);acQuoteLogicEl=YAHOO.util.Dom.get(acQuoteLogicId);initPlaceHolder(acInputBoxEl);var datasourceConfig={dsServer:dsServer};var oDataSource=initDataSource(datasourceConfig);var autocompleteConfig={defaultInputId:acInputId,defaultContainerId:acContainerId};oAutoComplete=initAutoComplete(oDataSource,autocompleteConfig);oAutoComplete.acModId=acModId;handleEvents();if(acInputFocus==1){focusInputBox(acInputBoxEl);}}
var initPlaceHolder=function(acInputBoxEl){var tempInputElem=document.createElement('input');var isPlaceHolder=('placeholder'in tempInputElem);var yud=YAHOO.util.Dom;var yue=YAHOO.util.Event;if(!isPlaceHolder){var placeHolderValue=acInputBoxEl.getAttribute('placeholder');var preInitVal=acInputBoxEl.value;yue.addListener(acInputBoxEl,"focus",function(){acInputBoxEl.value='';yud.removeClass(acInputBoxEl,'hint');});yue.addListener(acInputBoxEl,"blur",function(){var value=acInputBoxEl.value;if(value===null||value.length===0){acInputBoxEl.value=placeHolderValue;yud.addClass(acInputBoxEl,'hint');}});if(preInitVal===undefined||preInitVal.length===0||preInitVal===placeHolderValue){acInputBoxEl.value=placeHolderValue;yud.addClass(acInputBoxEl,'hint');}}}
return{init:init,oDS:oDataSource,acInputHasFocus:acInputHasFocus,oAC:oAutoComplete}};
var loadedCallback=function(){var conf;for(i=0,l=YAHOO.Finance.SymbolSuggestConfig.length;i<l;i++){conf=YAHOO.Finance.SymbolSuggestConfig[i];YAHOO.util.Event.onAvailable(conf.acInputId,function(conf){var YSS=new YAHOO.Finance.SymbolSuggest();if(document.activeElement==document.getElementById(conf.acInputId)){YSS.acInputHasFocus(true);}
YSS.init(conf);},conf);}}
var acRequiredLibs=["datasource","autocomplete","json","event","dom"];loadRequiredLibraries(acRequiredLibs,{debug:false},loadedCallback);
function initNav(){if(YAHOO.env.ua.ie>0){var ie_ver=Math.round(YAHOO.env.ua.ie);YAHOO.util.Dom.addClass(document.body,"ie ie"+ie_ver);}
if(YAHOO.env.ua.gecko>0){var geco_ver=Math.round(YAHOO.env.ua.gecko);YAHOO.util.Dom.addClass(document.body,"ff ff"+geco_ver);}
if(YAHOO.util.Dom.get('y-main-nav')){var mainNav=new YAHOO.Finance.Navigation({debug:false,navId:'y-main-nav'}).init();}
if(YAHOO.util.Dom.get('y-portfolios-list')){var portfolioNav=new YAHOO.Finance.Navigation({debug:false,navId:'y-portfolios-list',useDelay:false}).init();}
var ul=YAHOO.util.Dom.get('y-portfolios-list');if(!ul){return;}
var lis=YAHOO.util.Dom.getChildren(ul);if(lis&&lis.length&&lis.length>10){YAHOO.util.Dom.addClass(ul.parentNode,'scroll');}}
function positionDropArrow(){var nav=YAHOO.util.Dom.get('y-main-nav');if(!YAHOO.util.Dom.hasClass(nav,"yog-grid")){return;}
var lis=YAHOO.util.Dom.getChildren(nav);for(i=0;i<lis.length;i++){var navWidth=lis[i].scrollWidth;var arrow=YAHOO.util.Dom.getElementsByClassName("arrow",'div',lis[i]);if(undefined!=arrow){YAHOO.util.Dom.setStyle(arrow[0],"width",navWidth+"px");YAHOO.util.Dom.addClass(arrow[0],"displayarrow");if(YAHOO.env.ua.gecko>9){YAHOO.util.Dom.setStyle(arrow[0],"top","29px");}}}}
YAHOO.util.Event.onDOMReady(initNav);YAHOO.util.Event.onDOMReady(positionDropArrow);var cleanupYWACookies=function(){var each_cookie,cname;var all_cookies=document.cookie.split(';');for(i=0;i<all_cookies.length;i++){each_cookie=all_cookies[i].split('=');cname=YAHOO.lang.trim(each_cookie[0]);if(cname=='fpc1000663913756'||cname=='ywadp1000663913756'||cname=='fpc10001692911756'||cname=='ywadp10001692911756'||cname=='fpc1000996979156'||cname=='ywadp1000996979156'||cname=='fpc10002090107956'||cname=='ywadp10002090107956'||cname=='fpc10001849235356'||cname=='ywadp10001849235356'||cname=='fpc10001364153362'||cname=='ywadp10001364153362'||cname=='fpc1000416531562'||cname=='ywadp1000416531562'||cname=='fpc10001986351456'||cname=='ywadp10001986351456'||cname=='fpc10001118871856'||cname=='ywadp10001118871856'){document.cookie=cname+'=;expires=Thu, 01-Jan-1970 00:00:01 GMT;path=/';}}}
cleanupYWACookies();
YAHOO.namespace("Finance");YAHOO.Finance.Navigation=function(config){this.config=config;this.navObj=null;this.navItems=[];this.activeSubnav=null;this.timeout=null;};YAHOO.Finance.Navigation.prototype={init:function(){this.navObj=YAHOO.util.Dom.get(this.config.navId);if(!this.navObj){return false;}
this.navItems=YAHOO.util.Dom.getChildrenBy(this.navObj,function(el){return el.tagName.toUpperCase()==='LI';});if(!this.navItems.length){return false;}
var that=this;for(var i=0,l=this.navItems.length;i<l;i++){var el=this.navItems[i];el.onmouseover=function(){that.handleMouseOver(this);};el.onmouseout=function(){that.handleMouseOut(this);};el.onfocusin=function(){that.handleMouseOver(this);};el.onfocusout=function(){that.handleMouseOut(this);};if(el.addEventListener){el.addEventListener('focus',function(){that.handleMouseOver(this);},true);el.addEventListener('blur',function(){that.handleMouseOut(this);},true);}}
this.markSubNavs();},addIeShim:function(){},markSubNavs:function(){var lis=this.navObj.getElementsByTagName('li');for(var i=0,l=lis.length;i<l;i++){var li=lis[i];var ul=li.getElementsByTagName('li');if(this.isTopLevelLi(li)){YAHOO.util.Dom.addClass(li,'top');}
if(ul.length){if(YAHOO.util.Dom.hasClass(li,'new')||YAHOO.util.Dom.hasClass(li,'updated')){YAHOO.util.Dom.addClass(li,'subnav-tagged');}else{YAHOO.util.Dom.addClass(li,'subnav');}}}},isTopLevelLi:function(el){while(el.id!==this.config.navId){el=el.parentNode;if(el.tagName.toUpperCase()==='LI'){return false;}}
return true;},handleMouseOver:function(el){this.activate(el);},handleMouseOut:function(el){if(this.config.useDelay===false){this.deactivate();}else{this.deactivateDelayed();}},activate:function(el){if(this.timeout){window.clearTimeout(this.timeout);this.timeout=null;}
if(this.activeSubnav){this.deactivate(this.activeSubnav);}
this.activeSubnav=el;YAHOO.util.Dom.addClass(el,'active');},deactivate:function(){YAHOO.util.Dom.removeClass(this.activeSubnav,'active');this.activeSubnav=null;if(this.timeout){window.clearTimeout(this.timeout);this.timeout=null;}},deactivateDelayed:function(){var that=this;this.timeout=window.setTimeout(function(){that.deactivate();},1000);}};
YUI.add('media-portfolios-nav',function(Y){Y.namespace('Media');Y.Media.PortfoliosNav=function(conf){this.init(conf);};Y.Media.PortfoliosNav.prototype={init:function(conf){this.setDefaults(conf);this.mLi=Y.all(this.groupSelector);if(this.mLi){this.mLiSize=this.mLi.size();if(this.mLiSize>0){this.transform();if(this.mLiSize>this.visibleCount){this.attachEvents();}}}},setDefaults:function(conf){conf=conf||{};this.conf=conf;this.srcNode=conf.srcNode||'';this.groupSelector=conf.groupSelector||'';this.axis='y';this.scrollAmount=15;this.visibleCount=9;},transform:function(){var node=Y.one(this.srcNode);this.hasScroll=this.mLiSize>this.visibleCount;var scrollTrack='';if(this.hasScroll){scrollTrack='<div class="nav-fin-scrollbar-track">'+'<div class="nav-fin-scrollbar-track-piece"></div>'+'</div>'+'<div class="nav-fin-scrollbar-thumb-up"></div>'+'<div class="nav-fin-scrollbar-thumb-down"></div>';}
var wrapperPane=Y.Node.create('<div class="nav-fin-scrollbar">'+'<ul class="nav-fin-scrollbar-pane"></ul>'+scrollTrack+'</div>');wrapperPane.one('.nav-fin-scrollbar-pane').insert(document.getElementById('y-portfolios-list').innerHTML);node.one('#y-portfolios').remove("false");node.one('ul').insert(wrapperPane,0);this.containerNode=Y.one('.nav-fin-scrollbar');this.paneNode=Y.one('.nav-fin-scrollbar-pane');if(this.hasScroll){this.trackNode=Y.one('.nav-fin-scrollbar-track');this.trackPieceNode=Y.one('.nav-fin-scrollbar-track-piece');this.thumbUpNode=Y.one('.nav-fin-scrollbar-thumb-up');this.thumbDownNode=Y.one('.nav-fin-scrollbar-thumb-down');this.containerNode.setStyles({'overflow':'hidden','height':'206px'});this.trackNode.setStyles({'top':'16px','height':'190px'});this.trackPieceNode.setStyles({'height':(parseInt(this.containerNode.getStyle('height'))*parseInt(this.trackNode.getStyle('height')))/(this.mLiSize*22)});this.thumbDownNode.setStyles({'top':parseInt(this.trackNode.getStyle('height'))+parseInt(this.trackNode.getStyle('top'))+2});this.scrollFactor=(this.mLiSize-this.visibleCount+1)*22/(parseInt(this.trackNode.getStyle('height'))-parseInt(this.trackPieceNode.getStyle('height')));}},attachEvents:function(){var upintervalid,downintervalid;var self=this;if(this.hasScroll){var dd1=new Y.DD.Drag({node:this.trackPieceNode,after:{'drag:drag':Y.bind(this._afterDrag,this),'drag:end':Y.bind(this._afterDragEnd,this)}}).plug(Y.Plugin.DDConstrained,{constrain2node:this.trackNode,stickY:true});}
this.thumbUpNode.on("mousedown",function(e){if(downintervalid){clearInterval(downintervalid);}
upintervalid=setInterval(function(){var top=self.validShiftUp();if(top){self.shiftUp({'top':top});}else{clearInterval(upintervalid);}},100);},this);this.thumbDownNode.on("mousedown",function(e){if(upintervalid){clearInterval(upintervalid);}
downintervalid=setInterval(function(){self.shiftDown(undefined,downintervalid);},100);},this);this.thumbUpNode.on("mouseup",function(e){if(upintervalid){clearInterval(upintervalid);upintervalid=null;}});this.thumbDownNode.on("mouseup",function(e){if(downintervalid){clearInterval(downintervalid);downintervalid=null;}});this.containerNode.on("DOMMouseScroll",function(e,node){var wheelDelta=e.wheelDelta
shift=wheelDelta*this.scrollAmount;e.halt();if(shift>0){this.shiftUp({'shift':shift});}else if(shift<0){this.shiftDown(-shift);}},this,this.paneNode);},validShiftUp:function(){var top=parseInt(this.trackPieceNode.getStyle('top'));if(top>0){return top;}else{return false;}},shiftUp:function(config){var top,shift=config.shift;if(config.top){top=config.top;}else{top=this.validShiftUp();}
if(top){var shift=shift||this.scrollAmount;shift=top<shift?top:shift;this.trackPieceNode.setStyle('top',(top-shift)+"px");var paneTop=parseInt(this.paneNode.getStyle('top')),newTop=paneTop+Math.round(shift*this.scrollFactor);if(newTop>0){newTop=0;}
this.paneNode.setStyle('top',newTop);}},shiftDown:function(shift,intervalid){var trackPieceTop=parseInt(this.trackPieceNode.getStyle('top')),trackNodeHeight=parseInt(this.trackNode.getStyle('height')),trackPieceHeight=parseInt(this.trackPieceNode.getStyle("height")),limit=parseInt(this.thumbDownNode.getStyle('top'))-trackPieceHeight-10,shift=shift||this.scrollAmount;if(isNaN(trackPieceTop)){trackPieceTop=0;}
if(limit>trackPieceTop+shift){var trackMargin=trackNodeHeight-trackPieceHeight-shift;shift=trackPieceTop>trackMargin?0:shift;this.trackPieceNode.setStyle('top',(trackPieceTop+shift)+"px");var paneTop=parseInt(this.paneNode.getStyle('top'));if(isNaN(paneTop)){paneTop=0;}
this.paneNode.setStyle('top',(paneTop-Math.round(shift*this.scrollFactor)));}else{if(intervalid){clearInterval(intervalid);}}},_afterDrag:function(e){var thumbY=e.info.xy[1],trackTop=e.target.con._regionCache['top'],trackHeight=e.target.con._regionCache['height'];var offset=(thumbY-trackTop)*this.scrollFactor;offset=Math.round(offset);this.paneNode.setStyle('top',-offset);},_afterDragEnd:function(e){var thumbY=parseInt(this.trackPieceNode.getStyle("top")),thumbHeight=parseInt(this.trackPieceNode.getStyle("height")),trackTop=e.target.con._regionCache['top'],trackHeight=e.target.con._regionCache['height'];if(thumbY>trackHeight){thumbY=trackHeight-thumbHeight;this.trackPieceNode.setStyles({'top':thumbY,'left':0});}else if(thumbY<0){thumbY=0;this.trackPieceNode.setStyles({'top':0,'left':0});}}};},'0.0.1',{requires:['node','event','dd-constrain']});YUI.add('nav-portfolios-quoteslist',function(Y){Y.namespace('Finance');Y.Finance.NavQuoteList=function(){if(Y.one('.gsnav_watchlist')!==null){this.init();}};Y.Finance.NavQuoteList.prototype={xhrObj:null,pf_id:null,popoutEv:null,init:function(){Y.delegate('hover',this.showPF,'#y-nav-my-portfolios .nav-fin-scrollbar ul li',null,this);},showPF:function(ev){var target=ev.target,pf_id=target.getAttribute('data-pfid'),url='/_xhr/watchlist/?selected='+pf_id;if(this.xhrObj){this.xhrObj.abort();}
this.xhrObj=Y.io(url,{method:"GET",on:{success:this._onSuccess,failure:this._onFailure},context:this});this.pf_id=pf_id;},_onSuccess:function(id,o){var charts,qt_height,quotes_container=Y.one('#y-nav-my-portfolios .nav-quotes-list'),nav_container=Y.one('#y-nav-my-portfolios'),resp_fragment=Y.Node.create(o.responseText),quotes_table=resp_fragment.one('#rq-overlay .overlay-container .more-quotes-table');if(quotes_table===null&&o.responseText!==''){quotes_table=resp_fragment.one('#mediawatchlist .quotes-table');}
if(quotes_table===null){return;}
if(quotes_container===null){quotes_container=Y.Node.create('<div class="nav-quotes-list Pos-a T-0 D-b"></div>');nav_container.appendChild(quotes_container);nav_container.addClass('nav-quotes-block');}
quotes_container.all('*').remove();quotes_table.all('.rq-sparkline-chart img').each(function(imgNode){var chartImg=imgNode.getAttribute('data-imageloader-src');imgNode.set('src',chartImg);});quotes_container.appendChild(quotes_table);this.xhrObj=null;this.storePfInCookie();if(this.popoutEv!==null){try{this.popoutEv.detach();}catch(e){}}
this.popoutEv=Y.on('click',this.popOutLauncher,'.more-quotes-table th a.pop-out',this);},_onFailure:function(id,o){this.xhrObj=null;},popOutLauncher:function(e){var popOut=e.target,link=popOut&&popOut.getAttribute('data-popout-href');e.preventDefault();if(link){window.open(link,'WatchlistPopOut','scrollbars=yes,directories=no,menubar=no,toolbar=no,location=no,width=600,height=600');}},storePfInCookie:function(){var COOKIE_STORE='tab_st';this.storeInCookie(COOKIE_STORE,'watchl_prt',this.pf_id);},storeInCookie:function(cookie,key,value,raw){var oldVal,newVal,cookieKey,cookieVal,expiry=new Date(),host=window.location.hostname,domain='.'+host.match(/[^.]+\.[^.]+\.[^.]+$/),DAY_IN_MS=86400000,opts;expiry.setTime(expiry.getTime()+180*DAY_IN_MS);opts={expires:expiry,domain:domain,path:'/',raw:true};if(raw){oldVal=Y.Cookie.getSubs(cookie)||{};oldVal[key]=value;newVal=[];for(cookieKey in oldVal){cookieVal=oldVal[cookieKey];if(oldVal.hasOwnProperty(cookieKey)&&cookieKey&&cookieVal){if(cookieKey!==key){cookieVal=encodeURIComponent(cookieVal);}
newVal.push(cookieKey+'='+cookieVal);}}
Y.Cookie.set(cookie,newVal.join('&'),opts);}else{Y.Cookie.setSub(cookie,key,value,opts);}}}},'1.0.0',{requires:['event','node','io','cookie']});YUI.add('nav-portfolio-list',function(Y){Y.namespace('Finance');Y.Finance.PortfolioList=function(){if(Y.one('#y-my-portfolios')!==null){this.init();}else{this.buildNavAndQuoteList();}};Y.Finance.PortfolioList.prototype={init:function(){if(this.xhrObj){this.xhrObj.abort();}
this.xhrObj=Y.io('/_xhr/watchlist/?listMarkupOnly=true',{method:'GET',on:{success:this._onSuccess},context:this});},_onSuccess:function(id,o){var target=Y.one('#y-my-portfolios');if(target){target.one('.nav-sub').remove();target.appendChild(Y.Node.create(o.responseText).one('#y-nav-my-portfolios'));this.buildNavAndQuoteList();}},buildNavAndQuoteList:function(){new Y.Media.PortfoliosNav({srcNode:'.nav-fin-portfolios',groupSelector:'.fin-portfolio'});Y.later(10,this,function(){new Y.Finance.NavQuoteList();});}};},'1.0.0',{requires:['event','node','io','cookie','media-portfolios-nav','nav-portfolios-quoteslist']});YUI().use('nav-portfolio-list','event','node','dd-constrain','io','json',function(Y){new Y.Finance.PortfolioList();});/*
Copyright (c) 2009, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.net/yui/license.txt
version: 2.8.0r4
*/
YAHOO.util.Get=function(){var queues={},qidx=0,nidx=0,purging=false,ua=YAHOO.env.ua,lang=YAHOO.lang;var _node=function(type,attr,win){var w=win||window,d=w.document,n=d.createElement(type);for(var i in attr){if(attr[i]&&YAHOO.lang.hasOwnProperty(attr,i)){n.setAttribute(i,attr[i]);}}
return n;};var _linkNode=function(url,win,attributes){var o={id:"yui__dyn_"+(nidx++),type:"text/css",rel:"stylesheet",href:url};if(attributes){lang.augmentObject(o,attributes);}
return _node("link",o,win);};var _scriptNode=function(url,win,attributes){var o={id:"yui__dyn_"+(nidx++),type:"text/javascript",src:url};if(attributes){lang.augmentObject(o,attributes);}
return _node("script",o,win);};var _returnData=function(q,msg){return{tId:q.tId,win:q.win,data:q.data,nodes:q.nodes,msg:msg,purge:function(){_purge(this.tId);}};};var _get=function(nId,tId){var q=queues[tId],n=(lang.isString(nId))?q.win.document.getElementById(nId):nId;if(!n){_fail(tId,"target node not found: "+nId);}
return n;};var _fail=function(id,msg){var q=queues[id];if(q.onFailure){var sc=q.scope||q.win;q.onFailure.call(sc,_returnData(q,msg));}};var _finish=function(id){var q=queues[id];q.finished=true;if(q.aborted){var msg="transaction "+id+" was aborted";_fail(id,msg);return;}
if(q.onSuccess){var sc=q.scope||q.win;q.onSuccess.call(sc,_returnData(q));}};var _timeout=function(id){var q=queues[id];if(q.onTimeout){var sc=q.scope||q;q.onTimeout.call(sc,_returnData(q));}};var _next=function(id,loaded){var q=queues[id];if(q.timer){q.timer.cancel();}
if(q.aborted){var msg="transaction "+id+" was aborted";_fail(id,msg);return;}
if(loaded){q.url.shift();if(q.varName){q.varName.shift();}}else{q.url=(lang.isString(q.url))?[q.url]:q.url;if(q.varName){q.varName=(lang.isString(q.varName))?[q.varName]:q.varName;}}
var w=q.win,d=w.document,h=d.getElementsByTagName("head")[0],n;if(q.url.length===0){if(q.type==="script"&&ua.webkit&&ua.webkit<420&&!q.finalpass&&!q.varName){var extra=_scriptNode(null,q.win,q.attributes);extra.innerHTML='YAHOO.util.Get._finalize("'+id+'");';q.nodes.push(extra);h.appendChild(extra);}else{_finish(id);}
return;}
var url=q.url[0];if(!url){q.url.shift();return _next(id);}
if(q.timeout){q.timer=lang.later(q.timeout,q,_timeout,id);}
if(q.type==="script"){n=_scriptNode(url,w,q.attributes);}else{n=_linkNode(url,w,q.attributes);}
_track(q.type,n,id,url,w,q.url.length);q.nodes.push(n);if(q.insertBefore){var s=_get(q.insertBefore,id);if(s){s.parentNode.insertBefore(n,s);}}else{h.appendChild(n);}
if((ua.webkit||ua.gecko)&&q.type==="css"){_next(id,url);}};var _autoPurge=function(){if(purging){return;}
purging=true;for(var i in queues){var q=queues[i];if(q.autopurge&&q.finished){_purge(q.tId);delete queues[i];}}
purging=false;};var _purge=function(tId){if(queues[tId]){var q=queues[tId],nodes=q.nodes,l=nodes.length,d=q.win.document,h=d.getElementsByTagName("head")[0],sib,i,node,attr;if(q.insertBefore){sib=_get(q.insertBefore,tId);if(sib){h=sib.parentNode;}}
for(i=0;i<l;i=i+1){node=nodes[i];if(node.clearAttributes){node.clearAttributes();}else{for(attr in node){delete node[attr];}}
h.removeChild(node);}
q.nodes=[];}};var _queue=function(type,url,opts){var id="q"+(qidx++);opts=opts||{};if(qidx%YAHOO.util.Get.PURGE_THRESH===0){_autoPurge();}
queues[id]=lang.merge(opts,{tId:id,type:type,url:url,finished:false,aborted:false,nodes:[]});var q=queues[id];q.win=q.win||window;q.scope=q.scope||q.win;q.autopurge=("autopurge"in q)?q.autopurge:(type==="script")?true:false;if(opts.charset){q.attributes=q.attributes||{};q.attributes.charset=opts.charset;}
lang.later(0,q,_next,id);return{tId:id};};var _track=function(type,n,id,url,win,qlength,trackfn){var f=trackfn||_next;if(ua.ie){n.onreadystatechange=function(){var rs=this.readyState;if("loaded"===rs||"complete"===rs){n.onreadystatechange=null;f(id,url);}};}else if(ua.webkit){if(type==="script"){if(ua.webkit>=420){n.addEventListener("load",function(){f(id,url);});}else{var q=queues[id];if(q.varName){var freq=YAHOO.util.Get.POLL_FREQ;q.maxattempts=YAHOO.util.Get.TIMEOUT/freq;q.attempts=0;q._cache=q.varName[0].split(".");q.timer=lang.later(freq,q,function(o){var a=this._cache,l=a.length,w=this.win,i;for(i=0;i<l;i=i+1){w=w[a[i]];if(!w){this.attempts++;if(this.attempts++>this.maxattempts){var msg="Over retry limit, giving up";q.timer.cancel();_fail(id,msg);}else{}
return;}}
q.timer.cancel();f(id,url);},null,true);}else{lang.later(YAHOO.util.Get.POLL_FREQ,null,f,[id,url]);}}}}else{n.onload=function(){f(id,url);};}};return{POLL_FREQ:10,PURGE_THRESH:20,TIMEOUT:2000,_finalize:function(id){lang.later(0,null,_finish,id);},abort:function(o){var id=(lang.isString(o))?o:o.tId;var q=queues[id];if(q){q.aborted=true;}},script:function(url,opts){return _queue("script",url,opts);},css:function(url,opts){return _queue("css",url,opts);}};}();YAHOO.register("get",YAHOO.util.Get,{version:"2.8.0r4",build:"2449"});
if(typeof(YAHOO.Finance)=="undefined"||typeof(YAHOO.Finance.LazyLoad)=="undefined"){YAHOO.namespace("YAHOO.Finance.LazyLoad");}
YAHOO.Finance.LazyLoad=function(){var uniqueJs=new Array();var loadJsFiles=function(){if(!uniqueJs.indexOf){uniqueJs.indexOf=function(searchElement){"use strict";if(this==null){throw new TypeError();}
var t=Object(this);var len=t.length>>>0;if(len===0){return-1;}
var n=0;if(arguments.length>0){n=Number(arguments[1]);if(n!=n){n=0;}else if(n!=0&&n!=Infinity&&n!=-Infinity){n=(n>0||-1)*Math.floor(Math.abs(n));}}
if(n>=len){return-1;}
var k=n>=0?n:Math.max(len-Math.abs(n),0);for(;k<len;k++){if(k in t&&t[k]===searchElement){return k;}}
return-1;}}
var $idx;var js_combo_arr=[],js_combo_url,js_combo_base;if(window.location.protocol=="http:"){js_combo_base='http://l.yimg.com/zz/combo?';}else{js_combo_base='https://s.yimg.com/zz/combo?';}
for(var i=0;i<ll_js.length;i++){$idx=uniqueJs.indexOf(ll_js[i].file);if($idx==-1){if(ll_js[i].combo==='1'){js_combo_arr.push(ll_js[i].file);}else{uniqueJs.push(ll_js[i].file);}}}
if(js_combo_arr.length>0){js_combo_url=js_combo_base+js_combo_arr.join('&');js_combo_url=js_combo_url.replace('mini/','');uniqueJs.push(js_combo_url);}
YAHOO.util.Get.script(uniqueJs,{onSuccess:this.successCallback});};var successCallback=function(){for(var i=0;i<ll_js.length;i++){if(ll_js[i].success_callback){try{ll_js[i].success_callback();}catch(e){console.log(e);}}}};var runScripts=function(){for(var i=0;i<ll_js.length;i++){if(undefined!=ll_js[i]['script']){ll_js[i]['script']();}}};var lazyLoadImages=function(lzbgClass){if(typeof(lzbgClass)!=='undefined'){var elements=YAHOO.util.Dom.getElementsByClassName(lzbgClass,'img');}else{var elements=YAHOO.util.Dom.getElementsByClassName('lzbg','img');}
elem_cnt=elements.length;var bg_img,start,end;for(var i=0;i<elem_cnt;i++){bg_img=YAHOO.util.Dom.getStyle(elements[i],'background-image');bg_img=bg_img.replace(/\"/g,"");start=bg_img.indexOf("\(");end=bg_img.indexOf("\)");bg_img=bg_img.substring(start+1,end);YAHOO.util.Dom.setAttribute(elements[i],'src',bg_img);}}
return{loadJsFiles:loadJsFiles,runScripts:runScripts,successCallback:successCallback,lazyLoadImages:lazyLoadImages}};YAHOO.util.Event.addListener(window,"load",function(){if(typeof(ll_js)=="undefined"){return false;}var ll=new YAHOO.Finance.LazyLoad();ll.loadJsFiles();ll.runScripts();});YUI().use('stencil-imageloader',function(Y){});
YUI().use('node','node-event-simulate','get','videoplayer',function(Y){function InlineVideoPlayer(conf){this.init(conf,Y);}
InlineVideoPlayer.prototype={init:function(conf,Y){if(!conf){return false;}
this.video_items=conf.playlist;this.player_config={pageSpaceId:conf.spaceId,comscoreC4:conf.comscore_c4,html5:false,autoplay:true,mute:false,continuousPlay:true,region:conf.region,lang:conf.lang,site:conf.site,'CMS':{'suppressAdContext':true},'YVAP':{'accountId':'882','playContext':'null','timeout':'.500'}};this.player_js_url=conf.yep_player_url;this.module=Y.one("#yfi_rel_videos");this.video_node=this.module.one("#video_container");this.video_thm_large=this.module.one("#video_thm_large");this.play_icon=this.module.one(".play_large");this.video_headlines=this.module.all("#video_headlines ul li");this.video_headlines_arr=[];this.is_playlist_over=0;this.video_headlines.each(function(node){var vid=node.getData('vid');this.video_headlines_arr[vid]=node;},this);var play_evt=this.module.delegate('click',function(e){e.preventDefault();play_evt.detach();this.video_counter=0;this.initVideo(Y,0);},'.play_large',this);this.module.one('#video_headlines ul').delegate('click',function(e){e.preventDefault();var video_index=e.target.ancestor('li').getData('vindex');this.video_counter=video_index-1;if(!this.vp){this.initVideo(Y,this.video_counter);}else{this.addVideo(this.video_counter);this.vp.playlist.setPosition(this.video_counter);}
this.showNextHeadline(this.video_counter,0);},'li .video_thm_small, li.upnext .play_video',this);this.initVideoForTablet();},initVideoForTablet:function(){if(navigator.userAgent.match(/Android|iPad|IEMobile/i)){this.play_icon.simulate("click");}},initVideo:function(Y,video_counter){var ll_obj=new YAHOO.Finance.LazyLoad();ll_obj.lazyLoadImages('ImageLoader-Delayed');this.video_thm_large.setStyle('display','none');this.video_node.setStyle('display','block');if(typeof Y.VideoPlatform==='undefined'){Y.Get.js(this.player_js_url,{onFailure:function(){},onSuccess:function(){this.initPlayer(this,video_counter);},context:this});}else{this.initPlayer(this,video_counter);}},initPlayer:function(self,video_counter){Y.use('videoplayer',function(){var video_items_cnt=self.video_items.length;var vpEvents=Y.VideoPlatform.API_Events;self.vp=new Y.VideoPlatform.VideoPlayer(self.player_config);self.addVideo(video_counter);self.vp.render(self.video_node);self.vp.on(vpEvents.PLAYBACK_COMPLETE,function(){this.video_counter++;if(this.video_counter<video_items_cnt){this.addVideo(this.video_counter);this.showNextHeadline(this.video_counter,0);}else{this.is_playlist_over=1;this.vp.playlist.clear();this.video_counter=0;this.addVideo(this.video_counter);this.showNextHeadline(this.video_counter,1);}},self);});},addVideo:function(video_counter){var cur_video_item=this.video_items[video_counter];var cur_video_id=cur_video_item.id;this.vp.playlist.addItem(cur_video_item);},showNextHeadline:function(video_counter,reset){if(!reset){var cur_video_item=this.video_items[video_counter];var cur_video_id=cur_video_item.id;var cur_headline=this.video_headlines_arr[cur_video_id];if(cur_headline){if(video_counter>0){var prev_headline=cur_headline.previous('li');prev_headline.removeClass('visible');}
cur_headline.removeClass('upnext');var next_headline=cur_headline.next('li');if(next_headline){next_headline.addClass('visible');next_headline.addClass('upnext');}else{cur_headline.addClass('no-thm');}}}else{var headline;for(headline in this.video_headlines_arr){headline_node=this.video_headlines_arr[headline];headline_node.removeClass('visible');}
var cur_video_item=this.video_items[video_counter];var cur_video_id=cur_video_item.id;var cur_headline=this.video_headlines_arr[cur_video_id];cur_headline.addClass('visible');var next_headline=cur_headline.next('li');if(next_headline){next_headline.addClass('visible');next_headline.addClass('upnext');}}}};if(typeof video_items!=='undefined'){var vobj=new InlineVideoPlayer(video_items);}});/*global YUI */
YUI().add('follow-quote',function(Y){'use strict';var ATTR_QUOTE="data-flw-quote";Y.namespace('Media.FollowQuote');Y.Media.FollowQuote={self:null,con:{EVT_FOLLOW_QUOTE:"follow-quote:action",EVT_ACT_FOLLOW:"follow",EVT_ACT_UNFOLLOW:"unfollow",CLASS_FOLLOW_QUOTE:"follow-quote",CLASS_FOLLOW:"follow-quote-follow",CLASS_UNFOLLOW:"follow-quote-following",CLASS_FOLLOW_SECTION:"follow-quote-area"},has_init:false,conf:{},followList:{},init:function(opt,onReady){var defOpt={"baseQuoteURL":"//finance.yahoo.com/q?s=","xhrBase":"/","loginUrl":"https://login.yahoo.com/config/login?.src=quotes&.done=","removeClassOnLoad":"","strings":{"following":"In Watchlist","follow":"Watchlist"}};if(window.location.protocol){defOpt.loginUrl=defOpt.loginUrl+window.location.protocol+"//"+window.location.host+"/"+window.location.pathname;}
if(this.has_init){this.updateButtonStates();if(onReady){onReady();}}else{this.conf=Y.merge(defOpt,opt);if(!this.conf.loginTxt){this.conf.loginTxt='<a href="'+this.conf.loginUrl+'">Sign in</a> to Add to Watchlist';}
this.self=this;Y.one("body").on("click",this.handleClickEvent,this);this.injectQuoteMustacheTmpl();this.initFollowState(onReady);this.has_init=true;}},api:{getSimpleWatchlist:function(opt,onSuccess,onFailure){var self=Y.Media.FollowQuote.self;Y.io(self.conf.xhrBase+"_xhr/watchlist-data/",{"on":{"success":onSuccess,"failure":onFailure},"context":self,"timeout":3000});},addFollow:function(opt,onSuccess,onFailure){var self=Y.Media.FollowQuote.self;Y.io(self.conf.xhrBase+"_xhr/watchlist-actions/",{"method":"POST","data":{"s":opt.ticker,"crumb":self.getCrumb(),"region":self.getRegion(),"lang":self.getLang(),"cmd":"add"},"on":{success:onSuccess,failure:onFailure},"context":self,"timeout":3000});},removeFollow:function(opt,onSuccess,onFailure){var self=Y.Media.FollowQuote.self;Y.io(self.conf.xhrBase+"_xhr/watchlist-actions/",{"method":"POST","data":{"s":opt.ticker,"crumb":self.getCrumb(),"region":self.getRegion(),"lang":self.getLang(),"cmd":"delete"},"on":{success:onSuccess,failure:onFailure},"context":self,"timeout":3000});}},initFollowState:function(callback){var self=this,data;this.api.getSimpleWatchlist({},function(status,e){var symbol,idx;data=Y.JSON.parse(e.responseText);self.conf.isLoggedIn=data.isLoggedIn;if(!self.conf.crumb){self.conf.crumb=data.crumb;}
if(data.data){for(idx in data.data){symbol=data.data[idx];if(symbol){self.followList[symbol]=true;}}}
self.updateButtonStates();if(callback){callback();}},this.handleAPIFailure);},handleAPIFailure:function(status,msg){return false;},getCrumb:function(){return this.conf.crumb;},getRegion:function(){return this.conf.region;},getLang:function(){return this.conf.lang;},getEventListenerName:function(){return this.con.EVT_FOLLOW_QUOTE;},getEventActFollowName:function(){return this.con.EVT_ACT_FOLLOW;},getEventActUnfollowName:function(){return this.con.EVT_ACT_UNFOLLOW;},getFollowBtnClass:function(){return this.con.CLASS_FOLLOW_QUOTE;},getFollowClass:function(){return this.con.CLASS_FOLLOW;},getUnfollowClass:function(){return this.con.CLASS_UNFOLLOW;},getFollowSectionClass:function(){return this.con.CLASS_FOLLOW_SECTION;},isLoggedIn:function(){return this.conf.isLoggedIn;},isFollowBtn:function(node){return node.ancestor("."+this.getFollowBtnClass(),true,"button");},handleClickEvent:function(evt){var target=evt.target,buttonNode,data={};buttonNode=target.ancestor("."+this.getFollowBtnClass(),true,"button");Y.all(".follow-quote-visible").removeClass("follow-quote-visible");if(buttonNode){data={ticker:buttonNode.getAttribute(ATTR_QUOTE),button:buttonNode};if(this.isLoggedIn()){if(buttonNode.hasClass(this.getUnfollowClass())){this.toggleFollow("follow",buttonNode,data);}else{this.toggleFollow("unfollow",buttonNode,data);}}else{this.showLoginHTML(buttonNode,data);}
evt.preventDefault();}},showLoginHTML:function(button_node,data){var buttonArea;Y.Stencil.Tooltip('show',button_node,{"classes":"FancyBox Pos-a Lh-14 Z-5 Px-10 Mt-10 Tooltip follow-quote-tooltip","content":this.conf.loginTxt,"maxWidth":"156px","width":"156px","position":"rc"});buttonArea=button_node.ancestor("."+this.getFollowSectionClass(),true);this.toggleFollow("follow",button_node,data);if(buttonArea){buttonArea.addClass("follow-quote-visible");}},toggleFollow:function(mode,button_node,evt_conf){var symbol=button_node.getAttribute(ATTR_QUOTE),txtNodes,btnNodes;evt_conf=evt_conf||{};txtNodes=Y.all('.follow-quote-txt['+ATTR_QUOTE+'="'+symbol+'"]');btnNodes=Y.all('button['+ATTR_QUOTE+'="'+symbol+'"]');if(mode==="follow"){evt_conf.action=this.con.EVT_ACT_UNFOLLOW;this.followList[evt_conf.ticker]=false;btnNodes.addClass(this.getFollowClass());btnNodes.removeClass(this.getUnfollowClass());txtNodes.setHTML(this.conf.strings.follow);if(this.isLoggedIn()){this.api.removeFollow({"ticker":evt_conf.ticker},function(status,e){},this.handleAPIFailure);}
Y.fire(this.getEventListenerName(),evt_conf);}else if(mode==="unfollow"){evt_conf.action=this.con.EVT_ACT_FOLLOW;this.followList[evt_conf.ticker]=true;btnNodes.addClass(this.getUnfollowClass());btnNodes.removeClass(this.getFollowClass());txtNodes.setHTML(this.conf.strings.following);if(this.isLoggedIn()){this.api.addFollow({"ticker":evt_conf.ticker},function(status,e){},this.handleAPIFailure);}
Y.fire(this.getEventListenerName(),evt_conf);}},injectQuoteMustacheTmpl:function(){var html='<script id="hb-follow-quote-btn" type="text/x-handlebars-template">'+'<button class="follow-quote {{follow_class}} {{addl_classes}}" '+ATTR_QUOTE+'="{{{ticker}}}"><i class="Icon">&#xe023;</i></button>'+' {{#show_follow_text}} <span class="follow-quote-txt" '+ATTR_QUOTE+'="{{{ticker}}}">{{follow_text}}</span>{{/show_follow_text}}'+'</script>';Y.one("body").insert(Y.Node.create(html));},updateButtonStates:function(){var symbol,txtNodes,btnNodes;for(symbol in this.followList){txtNodes=Y.all('.follow-quote-txt['+ATTR_QUOTE+'="'+symbol+'"]');btnNodes=Y.all('button['+ATTR_QUOTE+'="'+symbol+'"]');if(this.followList[symbol]){btnNodes.addClass(this.getUnfollowClass());txtNodes.setHTML(this.conf.strings.following);}else{btnNodes.removeClass(this.getUnfollowClass());btnNodes.addClass(this.getFollowClass());txtNodes.setHTML(this.conf.strings.follow);}}
if(this.conf.removeClassOnLoad!==""){Y.all("."+this.conf.removeClassOnLoad).removeClass(this.conf.removeClassOnLoad);}},getFollowBtnHTML:function(data){var source=Y.one("#hb-follow-quote-btn"),tmpl,tmplData;if(source){source=source.getHTML();tmpl=Y.Handlebars.compile(source);tmplData={"ticker":data.ticker,"follow_class":"","addl_classes":data.addl_classes||"","show_follow_text":false,"follow_text":""};if(data.showFollowText){tmplData.show_follow_text=true;if(this.followList[data.ticker]){tmplData.follow_text=this.conf.strings.following;}else{tmplData.follow_text=this.conf.strings.follow;}}
if(this.followList[data.ticker]){tmplData.follow_class=this.getUnfollowClass();}else{tmplData.follow_class=this.getFollowClass();}
return tmpl(tmplData);}else{return"";}},_injectFeatureCueTemplate:function(){var html='<script id="yfi_feature_cue_template" type="text/x-handlebars-template">'+'<div class="follow_intro">'+'<div class="intro_arrow"> </div>'+'<div class="close_icon"><i class="Icon">&#xe009;</i></div>'+'<div class="title">Introducing Watchlist.</div>'+'<div class="text">'+'Click the <i class="Icon">&#xe023;</i> star to add tickers to your watchlist. They\'ll appear with real-time prices in the navigation areas on desktop and mobile.'+'</div></div>'+'</script>';Y.one('body').append(html);},initFeatureCue:function(container){var source,template,html,expiry,isCookieSet=Y.Cookie.getSub('PRF','wf');if(isCookieSet){return;}
if(!Y.Media.FollowQuote.isLoggedIn()||Y.Object.isEmpty(Y.Media.FollowQuote.followList)){this._injectFeatureCueTemplate();source=Y.one('#yfi_feature_cue_template').getHTML();template=Y.Handlebars.compile(source);html=template();container.append(html);this.storeInPRFCookie();Y.one('.close_icon').on('click',function(e){Y.one('.follow_intro').setStyle('display','none');});}},storeInPRFCookie:function(){var PRF_cookie,DAY_IN_MS=86400000,expiry=new Date();expiry.setTime(expiry.getTime()+180*DAY_IN_MS);PRF_cookie=Y.Cookie.get("PRF",{raw:true});if(PRF_cookie===null){PRF_cookie='';}
if(PRF_cookie.indexOf('wf=1')===-1){PRF_cookie+='&wf=1';}
Y.Cookie.set("PRF",PRF_cookie,{path:"/",domain:".finance.yahoo.com",raw:true,expires:expiry});}};},'1.0.0',{requires:['io','node','event','json','stencil-tooltip','handlebars','transition','cookie']});